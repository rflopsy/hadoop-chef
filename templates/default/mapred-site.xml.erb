<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<configuration>

<property>
  <name>io.sort.factor</name>
  <value><%= node[:hadoop][:io_sort_factor] %></value>
</property>
<property>
  <name>io.sort.mb</name>
  <value><%= node[:hadoop][:io_sort_mb] %></value>
</property>
<property>
  <name>io.sort.record.percent</name>
  <value>0.05</value>
</property>
<%- if node[:hadoop][:min_split_size] %>
<property>
  <name>mapred.min.split.size</name>
  <value><%= node[:hadoop][:min_split_size] %></value>
</property>
<%- end %>

<property>
  <name>mapred.child.java.opts</name>
  <value><%= node[:hadoop][:java_child_opts] %></value>
</property>

<property>
  <name>mapred.job.reuse.jvm.num.tasks</name>
  <value>-1</value>
</property>
<property>
  <name>mapred.child.ulimit</name>
  <value><%= node[:hadoop][:java_child_ulimit] %></value>
  <final>true</final>
</property>
<property>
  <name>mapred.job.tracker</name>
  <value><%= @jobtracker_address %>:8021</value>
</property>
<property>
  <name>mapred.job.tracker.handler.count</name>
  <value><%= node[:hadoop][:jobtracker_handler_count] %></value>
  <final>true</final>
</property>
<property>
  <name>mapred.local.dir</name>
  <value><%= @mapred_local_dirs %></value>
  <final>true</final>
</property>
<property>
  <name>mapred.map.tasks.speculative.execution</name>
  <value>true</value>
</property>
<property>
  <name>mapred.reduce.parallel.copies</name>
  <value><%= node[:hadoop][:reduce_parallel_copies] %></value>
</property>
<property>
  <name>mapred.reduce.tasks.speculative.execution</name>
  <value>false</value>
</property>
<property>
  <name>mapred.submit.replication</name>
  <value>10</value>
</property>
<property>
  <name>mapred.system.dir</name>
  <value>/hadoop/system/mapred</value>
</property>
<property>
  <name>mapred.tasktracker.map.tasks.maximum</name>
  <value><%= node[:hadoop][:max_map_tasks] %></value>
  <final>true</final>
</property>
<property>
  <name>mapred.tasktracker.reduce.tasks.maximum</name>
  <value><%= node[:hadoop][:max_reduce_tasks] %></value>
  <final>true</final>
</property>
<property>
  <name>tasktracker.http.threads</name>
  <value><%= node[:hadoop][:tasktracker_http_threads] %></value>
  <final>true</final>
</property>
<property>
  <name>mapred.jobtracker.taskScheduler</name>
  <value>org.apache.hadoop.mapred.FairScheduler</value>
</property>
<property>
  <name>mapred.fairscheduler.allocation.file</name>
  <value>/etc/<%= node[:hadoop][:hadoop_handle] %>/conf/fairscheduler.xml</value>
</property>
<property>
  <name>mapred.compress.map.output</name>
  <value><%= node[:hadoop][:compress_map_output] %></value>
</property>
<property>
  <name>mapred.output.compression.type</name>
  <value><%= node[:hadoop][:output_compression_type] %></value>
</property>

<!-- Zookeeper config for hadoop hbase streaming -->

  <property>
    <name>hbase.zookeeper.quorum</name>
    <value><%= @zookeeper_address %></value>
    <description>
      Comma separated list of servers in the ZooKeeper Quorum.
      For example,
      "host1.mydomain.com,host2.mydomain.com,host3.mydomain.com".
      By default this is set to localhost for local and pseudo-distributed modes
      of operation. For a fully-distributed setup, this should be set to a full
      list of ZooKeeper quorum servers. If HBASE_MANAGES_ZK is set in hbase-env.sh
      this is the list of servers which we will start/stop ZooKeeper on.
    </description>
  </property>


<!-- Start Cloudera hue -->
<!-- <property> -->
<!--   <name>jobtracker.thrift.address</name> -->
<!--   <value>0.0.0.0:9290</value> -->
<!-- </property> -->
<!-- <property> -->
<!--   <name>mapred.jobtracker.plugins</name> -->
<!--   <value>org.apache.hadoop.thriftfs.ThriftJobTrackerPlugin</value> -->
<!--   <description>Comma-separated list of jobtracker plug-ins to be activated.</description> -->
<!-- </property> -->

</configuration>
